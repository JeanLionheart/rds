==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb300 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87403)              #1 void __gnu_cxx::new_allocator<std::pair<std::weak_ptr<rds::ClientInfo>, int> >::destroy<std::pair<std::weak_ptr<rds::ClientInfo>, int> >(std::pair<std::weak_ptr<rds::ClientInfo>, int>*) <null> (redis-server+0xaf4af)                                                                                                                                                                                         Previous write of size 8 at 0x5622c42eb300 by main thread:                                                                               #0 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x8741d)              #1 rds::MainLoop::Run() /home/jean/mypieces/rds/src/server/loop.cc:61 (redis-server+0x9153b)                                           #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt4pairISt8weak_ptrIN3rds10ClientInfoEEiED2Ev' of size 24 at 0x5622c42eb300 (redis-server+0x0000001f2300)                                                                                                                                                                                                                                                                             Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/stl_pair.h:211 in std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecb10 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c391)                        #1 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #2 void __gnu_cxx::new_allocator<std::pair<std::weak_ptr<rds::ClientInfo>, int> >::destroy<std::pair<std::weak_ptr<rds::ClientInfo>, int> >(std::pair<std::weak_ptr<rds::ClientInfo>, int>*) <null> (redis-server+0xaf4af)                                                                                                                                                                                         Previous write of size 8 at 0x5622c42ecb10 by main thread:                                                                               #0 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3ab)                        #1 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #2 rds::MainLoop::Run() /home/jean/mypieces/rds/src/server/loop.cc:61 (redis-server+0x9153b)                                           #3 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt8weak_ptrIN3rds10ClientInfoEED2Ev' of size 24 at 0x5622c42ecb10 (redis-server+0x0000001f3b10)                                                                                                                                                Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr.h:686 in std::weak_ptr<rds::ClientInfo>::~weak_ptr()           ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecb30 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c2c1)                                                                                                                         #1 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #2 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #3 void __gnu_cxx::new_allocator<std::pair<std::weak_ptr<rds::ClientInfo>, int> >::destroy<std::pair<std::weak_ptr<rds::ClientInfo>, int> >(std::pair<std::weak_ptr<rds::ClientInfo>, int>*) <null> (redis-server+0xaf4af)                                                                                                                                                                                         Previous write of size 8 at 0x5622c42ecb30 by main thread:                                                                               #0 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c2db)                                                                                                                         #1 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #2 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #3 rds::MainLoop::Run() /home/jean/mypieces/rds/src/server/loop.cc:61 (redis-server+0x9153b)                                           #4 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt10__weak_ptrIN3rds10ClientInfoELN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 24 at 0x5622c42ecb30 (redis-server+0x0000001f3b30)                                                                                                                                                                                                                                                       Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:1610 in std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr()                                                                                                            ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec580 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count() /usr/include/c++/11/bits/shared_ptr_base.h:795 (redis-server+0x7ebdf)                                                                                                                                       #1 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c2f2)                                                                                                                         #2 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #3 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #4 void __gnu_cxx::new_allocator<std::pair<std::weak_ptr<rds::ClientInfo>, int> >::destroy<std::pair<std::weak_ptr<rds::ClientInfo>, int> >(std::pair<std::weak_ptr<rds::ClientInfo>, int>*) <null> (redis-server+0xaf4af)                                                                                                                                                                                         Previous write of size 8 at 0x5622c42ec580 by main thread:                                                                               #0 std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count() /usr/include/c++/11/bits/shared_ptr_base.h:795 (redis-server+0x7ebf9)                                                                                                                                       #1 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c2f2)                                                                                                                         #2 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #3 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #4 rds::MainLoop::Run() /home/jean/mypieces/rds/src/server/loop.cc:61 (redis-server+0x9153b)                                           #5 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt12__weak_countILN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 32 at 0x5622c42ec580 (redis-server+0x0000001f3580)                                                                                                                                                                                                                                                                       Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:795 in std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count()                                                                                                                          ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec598 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count() /usr/include/c++/11/bits/shared_ptr_base.h:798 (redis-server+0x7eca7)                                                                                                                                       #1 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #2 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #3 void __gnu_cxx::new_allocator<std::pair<std::weak_ptr<rds::ClientInfo>, int> >::destroy<std::pair<std::weak_ptr<rds::ClientInfo>, int> >(std::pair<std::weak_ptr<rds::ClientInfo>, int>*) <null> (redis-server+0xaf4af)                                                                                                                                                                                         Previous write of size 8 at 0x5622c42ec598 by main thread:                                                                               #0 std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count() /usr/include/c++/11/bits/shared_ptr_base.h:798 (redis-server+0x7ecc1)                                                                                                                                       #1 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #2 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #3 rds::MainLoop::Run() /home/jean/mypieces/rds/src/server/loop.cc:61 (redis-server+0x9153b)                                           #4 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt12__weak_countILN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 32 at 0x5622c42ec580 (redis-server+0x0000001f3598)                                                                                                                                                                                                                                                                       Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:798 in std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count()                                                                                                                          ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecb38 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c301)                                                                                                                         #1 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #2 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #3 void __gnu_cxx::new_allocator<std::pair<std::weak_ptr<rds::ClientInfo>, int> >::destroy<std::pair<std::weak_ptr<rds::ClientInfo>, int> >(std::pair<std::weak_ptr<rds::ClientInfo>, int>*) <null> (redis-server+0xaf4af)                                                                                                                                                                                         Previous write of size 8 at 0x5622c42ecb38 by main thread:                                                                               #0 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c31b)                                                                                                                         #1 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #2 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #3 rds::MainLoop::Run() /home/jean/mypieces/rds/src/server/loop.cc:61 (redis-server+0x9153b)                                           #4 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt10__weak_ptrIN3rds10ClientInfoELN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 24 at 0x5622c42ecb30 (redis-server+0x0000001f3b38)                                                                                                                                                                                                                                                       Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:1610 in std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr()                                                                                                            ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecb40 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c336)                                                                                                                         #1 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #2 void __gnu_cxx::new_allocator<std::pair<std::weak_ptr<rds::ClientInfo>, int> >::destroy<std::pair<std::weak_ptr<rds::ClientInfo>, int> >(std::pair<std::weak_ptr<rds::ClientInfo>, int>*) <null> (redis-server+0xaf4af)                                                                                                                                                                                         Previous write of size 8 at 0x5622c42ecb40 by main thread:                                                                               #0 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c350)                                                                                                                         #1 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #2 rds::MainLoop::Run() /home/jean/mypieces/rds/src/server/loop.cc:61 (redis-server+0x9153b)                                           #3 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt10__weak_ptrIN3rds10ClientInfoELN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 24 at 0x5622c42ecb30 (redis-server+0x0000001f3b40)                                                                                                                                                                                                                                                       Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:1610 in std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr()                                                                                                            ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecb18 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3cd)                        #1 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #2 void __gnu_cxx::new_allocator<std::pair<std::weak_ptr<rds::ClientInfo>, int> >::destroy<std::pair<std::weak_ptr<rds::ClientInfo>, int> >(std::pair<std::weak_ptr<rds::ClientInfo>, int>*) <null> (redis-server+0xaf4af)                                                                                                                                                                                         Previous write of size 8 at 0x5622c42ecb18 by main thread:                                                                               #0 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3e7)                        #1 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #2 rds::MainLoop::Run() /home/jean/mypieces/rds/src/server/loop.cc:61 (redis-server+0x9153b)                                           #3 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt8weak_ptrIN3rds10ClientInfoEED2Ev' of size 24 at 0x5622c42ecb10 (redis-server+0x0000001f3b18)                                                                                                                                                Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr.h:686 in std::weak_ptr<rds::ClientInfo>::~weak_ptr()           ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecb20 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c402)                        #1 void __gnu_cxx::new_allocator<std::pair<std::weak_ptr<rds::ClientInfo>, int> >::destroy<std::pair<std::weak_ptr<rds::ClientInfo>, int> >(std::pair<std::weak_ptr<rds::ClientInfo>, int>*) <null> (redis-server+0xaf4af)                                                                                                                                                                                         Previous write of size 8 at 0x5622c42ecb20 by main thread:                                                                               #0 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c41c)                        #1 rds::MainLoop::Run() /home/jean/mypieces/rds/src/server/loop.cc:61 (redis-server+0x9153b)                                           #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt8weak_ptrIN3rds10ClientInfoEED2Ev' of size 24 at 0x5622c42ecb10 (redis-server+0x0000001f3b20)                                                                                                                                                Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr.h:686 in std::weak_ptr<rds::ClientInfo>::~weak_ptr()           ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb308 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x8743f)              #1 void __gnu_cxx::new_allocator<std::pair<std::weak_ptr<rds::ClientInfo>, int> >::destroy<std::pair<std::weak_ptr<rds::ClientInfo>, int> >(std::pair<std::weak_ptr<rds::ClientInfo>, int>*) <null> (redis-server+0xaf4af)                                                                                                                                                                                         Previous write of size 8 at 0x5622c42eb308 by main thread:                                                                               #0 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87459)              #1 rds::MainLoop::Run() /home/jean/mypieces/rds/src/server/loop.cc:61 (redis-server+0x9153b)                                           #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt4pairISt8weak_ptrIN3rds10ClientInfoEEiED2Ev' of size 24 at 0x5622c42eb300 (redis-server+0x0000001f2308)                                                                                                                                                                                                                                                                             Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/stl_pair.h:211 in std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb310 by thread T3 (mutexes: write M774196906575846656):                                                      #0 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87474)                                                                                                                                                   Previous write of size 8 at 0x5622c42eb310 by main thread:                                                                               #0 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x8748e)              #1 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt4pairISt8weak_ptrIN3rds10ClientInfoEEiED2Ev' of size 24 at 0x5622c42eb300 (redis-server+0x0000001f2310)                                                                                                                                                                                                                                                                             Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/stl_pair.h:211 in std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecf40 by thread T3 (mutexes: write M774196906575846656, write M775317617849140728):                           #0 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:702 (redis-server+0x7a449)                                                                                                                                   #1 std::__shared_ptr<json11::JsonString, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() <null> (redis-server+0x13d98b)                                                                                                                                                        Previous write of size 8 at 0x5622c42ecf40 by main thread:                                                                               #0 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:702 (redis-server+0x7a463)                                                                                                                                   #1 std::__shared_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x98863)                                                                                                                     #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 32 at 0x5622c42ecf40 (redis-server+0x0000001f3f40)                                                                                                                                                                                                                                                                     Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Mutex M775317617849140728 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:702 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count()                                                                                                                      ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecf58 by thread T3 (mutexes: write M774196906575846656, write M775317617849140728):                           #0 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:705 (redis-server+0x7a511)                                                                                                                                                                                                                                                                        Previous write of size 8 at 0x5622c42ecf58 by main thread:                                                                               #0 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:705 (redis-server+0x7a52b)                                                                                                                                   #1 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 32 at 0x5622c42ecf40 (redis-server+0x0000001f3f58)                                                                                                                                                                                                                                                                     Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Mutex M775317617849140728 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:705 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count()                                                                                                                      ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecf48 by thread T3 (mutexes: write M774196906575846656, write M775317617849140728):                           #0 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:704 (redis-server+0x7a491)                                                                                                                                   #1 std::__shared_ptr<json11::JsonValue, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x9ebdb)                                                                                                                                                                                                                                                        Previous write of size 8 at 0x5622c42ecf48 by main thread:                                                                               #0 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:704 (redis-server+0x7a4ab)                                                                                                                                   #1 std::__shared_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x98863)                                                                                                                     #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 32 at 0x5622c42ecf40 (redis-server+0x0000001f3f48)                                                                                                                                                                                                                                                                     Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Mutex M775317617849140728 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:704 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count()                                                                                                                      ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecbe0 by thread T3 (mutexes: write M774196906575846656, write M775317617849140728):                           #0 std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /usr/include/c++/11/bits/shared_ptr_base.h:161 (redis-server+0x7bb63)                                                                                                                                      #1 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:705 (redis-server+0x7a4cd)                                                                                                                                   #2 std::__shared_ptr<json11::JsonValue, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x9ebdb)                                                                                                                                                                                                                                                        Previous write of size 8 at 0x5622c42ecbe0 by main thread:                                                                               #0 std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /usr/include/c++/11/bits/shared_ptr_base.h:161 (redis-server+0x7bb7d)                                                                                                                                      #1 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:705 (redis-server+0x7a4cd)                                                                                                                                   #2 std::__shared_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x98863)                                                                                                                     #3 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt16_Sp_counted_baseILN9__gnu_cxx12_Lock_policyE2EE10_M_releaseEv' of size 64 at 0x5622c42ecbe0 (redis-server+0x0000001f3be0)                                                                                                                                                                                                                                                         Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Mutex M775317617849140728 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:161 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release()                                                                                                                         ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecc18 by thread T3 (mutexes: write M774196906575846656, write M775317617849140728):                           #0 std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /usr/include/c++/11/bits/shared_ptr_base.h:184 (redis-server+0x7be84)                                                                                                                                      #1 std::__shared_ptr<json11::JsonValue, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x9ebdb)                                                                                                                   #2 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:705 (redis-server+0x7a4cd)                                                                                                                                   #3 std::__shared_ptr<json11::JsonValue, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x9ebdb)                                                                                                                                                                                                                                                        Previous write of size 8 at 0x5622c42ecc18 by main thread:                                                                               #0 std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /usr/include/c++/11/bits/shared_ptr_base.h:184 (redis-server+0x7be9e)                                                                                                                                      #1 std::__shared_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x98863)                                                                                                                     #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt16_Sp_counted_baseILN9__gnu_cxx12_Lock_policyE2EE10_M_releaseEv' of size 64 at 0x5622c42ecbe0 (redis-server+0x0000001f3c18)                                                                                                                                                                                                                                                         Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Mutex M775317617849140728 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:184 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release()                                                                                                                         ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecf50 by thread T3 (mutexes: write M774196906575846656, write M775317617849140728):                           #0 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:705 (redis-server+0x7a4dc)                                                                                                                                   #1 std::__shared_ptr<json11::JsonValue, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x9ebdb)                                                                                                                   #2 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:705 (redis-server+0x7a4cd)                                                                                                                                   #3 std::__shared_ptr<json11::JsonValue, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x9ebdb)                                                                                                                                                                                                                                                        Previous write of size 8 at 0x5622c42ecf50 by main thread:                                                                               #0 std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /usr/include/c++/11/bits/shared_ptr_base.h:705 (redis-server+0x7a4f6)                                                                                                                                   #1 std::__shared_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1154 (redis-server+0x98863)                                                                                                                     #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Location is global '__gcov0._ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 32 at 0x5622c42ecf40 (redis-server+0x0000001f3f50)                                                                                                                                                                                                                                                                     Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Mutex M775317617849140728 is already destroyed.                                                                                                                                                                                                                               Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:705 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count()                                                                                                                      ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecbc0 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bee1)                                                                                                                  #1 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ecbc0 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7befb)                                                                                                                  #1 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #2 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZNSt15__uniq_ptr_implIN3rds11CommandBaseESt14default_deleteIS1_EE6_M_ptrEv' of size 24 at 0x5622c42ecbc0 (redis-server+0x0000001f3bc0)                                                                                                                                                                                                                                                  Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/unique_ptr.h:172 in std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr()                                                                                                     ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec5c0 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1397 (redis-server+0x7ea35)                                                                                                     #1 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #2 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ec5c0 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1397 (redis-server+0x7ea4f)                                                                                                     #1 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #2 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #3 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZSt3getILm0EJPN3rds11CommandBaseESt14default_deleteIS1_EEERNSt13tuple_elementIXT_ESt5tupleIJDpT0_EEE4typeERS9_' of size 24 at 0x5622c42ec5c0 (redis-server+0x0000001f35c0)                                                                                                                                                                                                              Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:1397 in std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&)                                                                                        ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec090 by thread T1 (mutexes: write M773915431599135712):                                                      #0 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1381 (redis-server+0x813bf)                              #1 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #2 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #3 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ec090 by thread T3 (mutexes: write M774196906575846656):                                            #0 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1381 (redis-server+0x813d9)                              #1 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #2 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #3 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #4 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZSt12__get_helperILm0EPN3rds11CommandBaseEJSt14default_deleteIS1_EEERT0_RSt11_Tuple_implIXT_EJS5_DpT1_EE' of size 24 at 0x5622c42ec090 (redis-server+0x0000001f3090)                                                                                                                                                                                                                    Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:1381 in rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&)                 ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ebb40 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:268 (redis-server+0x837f7)                                          #1 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x813ec)                              #2 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #3 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #4 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ebb40 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:268 (redis-server+0x83811)                                          #1 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x813ec)                              #2 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #3 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #4 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #5 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZNSt11_Tuple_implILm0EJPN3rds11CommandBaseESt14default_deleteIS1_EEE7_M_headERS5_' of size 24 at 0x5622c42ebb40 (redis-server+0x0000001f2b40)                                                                                                                                                                                                                                           Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:268 in std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&)                             ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb750 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::_Head_base<0ul, rds::CommandBase*, false>::_M_head(std::_Head_base<0ul, rds::CommandBase*, false>&) /usr/include/c++/11/tuple:233 (redis-server+0x8546f)                                                                                                              #1 std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:268 (redis-server+0x83824)                                          #2 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x813ec)                              #3 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #4 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #5 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42eb750 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::_Head_base<0ul, rds::CommandBase*, false>::_M_head(std::_Head_base<0ul, rds::CommandBase*, false>&) /usr/include/c++/11/tuple:233 (redis-server+0x85489)                                                                                                              #1 std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:268 (redis-server+0x83824)                                          #2 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x813ec)                              #3 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #4 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #5 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #6 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZNSt10_Head_baseILm0EPN3rds11CommandBaseELb0EE7_M_headERS3_' of size 16 at 0x5622c42eb750 (redis-server+0x0000001f2750)                                                                                                                                                                                                                                                                 Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:233 in std::_Head_base<0ul, rds::CommandBase*, false>::_M_head(std::_Head_base<0ul, rds::CommandBase*, false>&)                                                                                                 ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb758 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::_Head_base<0ul, rds::CommandBase*, false>::_M_head(std::_Head_base<0ul, rds::CommandBase*, false>&) /usr/include/c++/11/tuple:233 (redis-server+0x854a8)                                                                                                              #1 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x813ec)                              #2 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #3 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #4 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42eb758 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::_Head_base<0ul, rds::CommandBase*, false>::_M_head(std::_Head_base<0ul, rds::CommandBase*, false>&) /usr/include/c++/11/tuple:233 (redis-server+0x854c2)                                                                                                              #1 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x813ec)                              #2 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #3 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #4 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #5 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZNSt10_Head_baseILm0EPN3rds11CommandBaseELb0EE7_M_headERS3_' of size 16 at 0x5622c42eb750 (redis-server+0x0000001f2758)                                                                                                                                                                                                                                                                 Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:233 in std::_Head_base<0ul, rds::CommandBase*, false>::_M_head(std::_Head_base<0ul, rds::CommandBase*, false>&)                                                                                                 ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ebb48 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:268 (redis-server+0x83837)                                          #1 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x813ec)                              #2 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #3 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #4 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ebb48 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:268 (redis-server+0x83851)                                          #1 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x813ec)                              #2 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #3 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #4 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #5 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZNSt11_Tuple_implILm0EJPN3rds11CommandBaseESt14default_deleteIS1_EEE7_M_headERS5_' of size 24 at 0x5622c42ebb40 (redis-server+0x0000001f2b48)                                                                                                                                                                                                                                           Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:268 in std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&)                             ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ebb50 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:268 (redis-server+0x8386c)                                          #1 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #2 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #3 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ebb50 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:268 (redis-server+0x83886)                                          #1 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #2 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #3 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #4 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZNSt11_Tuple_implILm0EJPN3rds11CommandBaseESt14default_deleteIS1_EEE7_M_headERS5_' of size 24 at 0x5622c42ebb40 (redis-server+0x0000001f2b50)                                                                                                                                                                                                                                           Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:268 in std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >::_M_head(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&)                             ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec098 by thread T1 (mutexes: write M773915431599135712):                                                      #0 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x813ff)                              #1 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #2 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #3 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ec098 by thread T3 (mutexes: write M774196906575846656):                                            #0 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x81419)                              #1 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea62)                                                                                                     #2 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #3 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #4 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZSt12__get_helperILm0EPN3rds11CommandBaseEJSt14default_deleteIS1_EEERT0_RSt11_Tuple_implIXT_EJS5_DpT1_EE' of size 24 at 0x5622c42ec090 (redis-server+0x0000001f3098)                                                                                                                                                                                                                    Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:1382 in rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&)                 ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec0a0 by thread T1 (mutexes: write M773915431599135712):                                                      #0 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x81434)                              #1 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #2 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ec0a0 by thread T3 (mutexes: write M774196906575846656):                                            #0 rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1382 (redis-server+0x8144e)                              #1 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #2 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #3 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZSt12__get_helperILm0EPN3rds11CommandBaseEJSt14default_deleteIS1_EEERT0_RSt11_Tuple_implIXT_EJS5_DpT1_EE' of size 24 at 0x5622c42ec090 (redis-server+0x0000001f30a0)                                                                                                                                                                                                                    Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:1382 in rds::CommandBase*& std::__get_helper<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::_Tuple_impl<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >&)                 ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec5c8 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea75)                                                                                                     #1 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #2 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ec5c8 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7ea8f)                                                                                                     #1 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf0e)                                                                                                                  #2 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #3 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZSt3getILm0EJPN3rds11CommandBaseESt14default_deleteIS1_EEERNSt13tuple_elementIXT_ESt5tupleIJDpT0_EEE4typeERS9_' of size 24 at 0x5622c42ec5c0 (redis-server+0x0000001f35c8)                                                                                                                                                                                                              Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:1398 in std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&)                                                                                        ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec5d0 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7eaaa)                                                                                                     #1 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ec5d0 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&) /usr/include/c++/11/tuple:1398 (redis-server+0x7eac4)                                                                                                     #1 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #2 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZSt3getILm0EJPN3rds11CommandBaseESt14default_deleteIS1_EEERNSt13tuple_elementIXT_ESt5tupleIJDpT0_EEE4typeERS9_' of size 24 at 0x5622c42ec5c0 (redis-server+0x0000001f35d0)                                                                                                                                                                                                              Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/tuple:1398 in std::tuple_element<0ul, std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> > >::type& std::get<0ul, rds::CommandBase*, std::default_delete<rds::CommandBase> >(std::tuple<rds::CommandBase*, std::default_delete<rds::CommandBase> >&)                                                                                        ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecbc8 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf21)                                                                                                                  #1 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::__uniq_ptr_impl(std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >&&) /usr/include/c++/11/bits/unique_ptr.h:163 (redis-server+0xa0861)                                                                                                                                                              Previous write of size 8 at 0x5622c42ecbc8 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf3b)                                                                                                                  #1 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a59c)                                                                                                                  #2 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZNSt15__uniq_ptr_implIN3rds11CommandBaseESt14default_deleteIS1_EE6_M_ptrEv' of size 24 at 0x5622c42ecbc0 (redis-server+0x0000001f3bc8)                                                                                                                                                                                                                                                  Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/unique_ptr.h:172 in std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr()                                                                                                     ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecbd0 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf56)                                                                                                                                                                                                                                                       Previous write of size 8 at 0x5622c42ecbd0 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr() /usr/include/c++/11/bits/unique_ptr.h:172 (redis-server+0x7bf70)                                                                                                                  #1 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZNSt15__uniq_ptr_implIN3rds11CommandBaseESt14default_deleteIS1_EE6_M_ptrEv' of size 24 at 0x5622c42ecbc0 (redis-server+0x0000001f3bd0)                                                                                                                                                                                                                                                  Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/unique_ptr.h:172 in std::__uniq_ptr_impl<rds::CommandBase, std::default_delete<rds::CommandBase> >::_M_ptr()                                                                                                     ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecf00 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:355 (redis-server+0x7a56f)                                                                                                                  #1 void __gnu_cxx::new_allocator<std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> > >::destroy<std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> > >(std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >*) /usr/include/c++/11/ext/new_allocator.h:168 (redis-server+0xac9a9)                                                                                                                                                                                                          Previous write of size 8 at 0x5622c42ecf00 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:355 (redis-server+0x7a589)                                                                                                                  #1 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZNSt10unique_ptrIN3rds11CommandBaseESt14default_deleteIS1_EED2Ev' of size 56 at 0x5622c42ecf00 (redis-server+0x0000001f3f00)                                                                                                                                                                                                                                                            Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/unique_ptr.h:355 in std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr()                                                                                                     ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecf08 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a5af)                                                                                                                  #1 void __gnu_cxx::new_allocator<std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> > >::destroy<std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> > >(std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >*) /usr/include/c++/11/ext/new_allocator.h:168 (redis-server+0xac9a9)                                                                                                                                                                                                          Previous write of size 8 at 0x5622c42ecf08 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:359 (redis-server+0x7a5c9)                                                                                                                  #1 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:240 (redis-server+0x9c0e0)                                                                                                                                                        Location is global '__gcov0._ZNSt10unique_ptrIN3rds11CommandBaseESt14default_deleteIS1_EED2Ev' of size 56 at 0x5622c42ecf00 (redis-server+0x0000001f3f08)                                                                                                                                                                                                                                                            Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/unique_ptr.h:359 in std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr()                                                                                                     ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ecf30 by thread T1 (mutexes: write M773915431599135712):                                                      #0 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:362 (redis-server+0x7a70b)                                                                                                                                                                                                                                                       Previous write of size 8 at 0x5622c42ecf30 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr() /usr/include/c++/11/bits/unique_ptr.h:362 (redis-server+0x7a725)                                                                                                                                                                                                                                                       Location is global '__gcov0._ZNSt10unique_ptrIN3rds11CommandBaseESt14default_deleteIS1_EED2Ev' of size 56 at 0x5622c42ecf00 (redis-server+0x0000001f3f30)                                                                                                                                                                                                                                                            Mutex M773915431599135712 is already destroyed.                                                                                                                                                                                                                               Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/unique_ptr.h:362 in std::unique_ptr<rds::CommandBase, std::default_delete<rds::CommandBase> >::~unique_ptr()                                                                                                     ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ebc30 by thread T1 (mutexes: read M25):                                                                       #0 std::__detail::_Hash_node<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, true>::_M_next() const /usr/include/c++/11/bits/hashtable_policy.h:282 (redis-server+0x83195)                                                                                        #1 std::_Hashtable<rds::Str, std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, std::allocator<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >, std::__detail::_Select1st, std::equal_to<rds::Str>, unsigned long (*)(rds::Str const&), std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<true, false, true> >::_M_find_before_node(unsigned long, rds::Str const&, unsigned long) const /usr/include/c++/11/bits/hashtable.h:1843 (redis-server+0xd9c06)                                                                                                                                                                                                                                                             Previous write of size 8 at 0x5622c42ebc30 by thread T2 (mutexes: read M25):                                                             #0 std::__detail::_Hash_node<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, true>::_M_next() const /usr/include/c++/11/bits/hashtable_policy.h:282 (redis-server+0x831af)                                                                                        #1 std::__detail::_Node_iterator_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, true>::_M_incr() /usr/include/c++/11/bits/hashtable_policy.h:300 (redis-server+0xd38d8)                                                                                                                                                                                                                          Location is global '__gcov0._ZNKSt8__detail10_Hash_nodeISt4pairIKN3rds3StrESt10shared_ptrINS2_8KeyValueEEELb1EE7_M_nextEv' of size 16 at 0x5622c42ebc30 (redis-server+0x0000001f2c30)                                                                                                                                                                                                                                Mutex M25 (0x7b2000000000) created at:                                                                                                   #0 pthread_rwlock_wrlock ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:1368 (libtsan.so.0+0x3f778)                     #1 __glibcxx_rwlock_wrlock /usr/include/c++/11/shared_mutex:80 (redis-server+0x8f07e)                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T2 (tid=15901, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/hashtable_policy.h:282 in std::__detail::_Hash_node<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, true>::_M_next() const                                                                           ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ebc38 by thread T1 (mutexes: read M25):                                                                       #0 std::__detail::_Hash_node<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, true>::_M_next() const /usr/include/c++/11/bits/hashtable_policy.h:283 (redis-server+0x831dd)                                                                                                                                                                                                                             Previous write of size 8 at 0x5622c42ebc38 by thread T2 (mutexes: read M25):                                                             #0 std::__detail::_Hash_node<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, true>::_M_next() const /usr/include/c++/11/bits/hashtable_policy.h:283 (redis-server+0x831f7)                                                                                                                                                                                                                             Location is global '__gcov0._ZNKSt8__detail10_Hash_nodeISt4pairIKN3rds3StrESt10shared_ptrINS2_8KeyValueEEELb1EE7_M_nextEv' of size 16 at 0x5622c42ebc30 (redis-server+0x0000001f2c38)                                                                                                                                                                                                                                Mutex M25 (0x7b2000000000) created at:                                                                                                   #0 pthread_rwlock_wrlock ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:1368 (libtsan.so.0+0x3f778)                     #1 __glibcxx_rwlock_wrlock /usr/include/c++/11/shared_mutex:80 (redis-server+0x8f07e)                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T2 (tid=15901, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/hashtable_policy.h:283 in std::__detail::_Hash_node<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, true>::_M_next() const                                                                           ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb7c0 by thread T1 (mutexes: read M25):                                                                       #0 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:237 (redis-server+0x850ef)                                                                                      #1 std::__detail::_Node_const_iterator<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, false, true>::operator->() const /usr/include/c++/11/bits/hashtable_policy.h:398 (redis-server+0xcf784)                                                                                                                                                                                                         Previous write of size 8 at 0x5622c42eb7c0 by thread T2 (mutexes: read M25):                                                             #0 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:237 (redis-server+0x85109)                                                                                      #1 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_v() /usr/include/c++/11/bits/hashtable_policy.h:246 (redis-server+0xd3929)                                                                                                                                                                                                                                Location is global '__gcov0._ZNSt8__detail21_Hash_node_value_baseISt4pairIKN3rds3StrESt10shared_ptrINS2_8KeyValueEEEE9_M_valptrEv' of size 24 at 0x5622c42eb7c0 (redis-server+0x0000001f27c0)                                                                                                                                                                                                                        Mutex M25 (0x7b2000000000) created at:                                                                                                   #0 pthread_rwlock_wrlock ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:1368 (libtsan.so.0+0x3f778)                     #1 __glibcxx_rwlock_wrlock /usr/include/c++/11/shared_mutex:80 (redis-server+0x8f07e)                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T2 (tid=15901, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/hashtable_policy.h:237 in std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr()                                                                         ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb480 by thread T1 (mutexes: read M25):                                                                       #0 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr() /usr/include/c++/11/ext/aligned_buffer.h:114 (redis-server+0x86923)                                                                                                     #1 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x8511c)                                                                                      #2 std::__detail::_Node_const_iterator<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, false, true>::operator->() const /usr/include/c++/11/bits/hashtable_policy.h:398 (redis-server+0xcf784)                                                                                                                                                                                                         Previous write of size 8 at 0x5622c42eb480 by thread T2 (mutexes: read M25):                                                             #0 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr() /usr/include/c++/11/ext/aligned_buffer.h:114 (redis-server+0x8693d)                                                                                                     #1 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x8511c)                                                                                      #2 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_v() /usr/include/c++/11/bits/hashtable_policy.h:246 (redis-server+0xd3929)                                                                                                                                                                                                                                Location is global '__gcov0._ZN9__gnu_cxx16__aligned_bufferISt4pairIKN3rds3StrESt10shared_ptrINS2_8KeyValueEEEE6_M_ptrEv' of size 24 at 0x5622c42eb480 (redis-server+0x0000001f2480)                                                                                                                                                                                                                                 Mutex M25 (0x7b2000000000) created at:                                                                                                   #0 pthread_rwlock_wrlock ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:1368 (libtsan.so.0+0x3f778)                     #1 __glibcxx_rwlock_wrlock /usr/include/c++/11/shared_mutex:80 (redis-server+0x8f07e)                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T2 (tid=15901, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/ext/aligned_buffer.h:114 in __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr()                                                                                        ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb2b0 by thread T1 (mutexes: read M25):                                                                       #0 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_addr() /usr/include/c++/11/ext/aligned_buffer.h:102 (redis-server+0x876cf)                                                                                                    #1 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr() /usr/include/c++/11/ext/aligned_buffer.h:115 (redis-server+0x86950)                                                                                                     #2 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x8511c)                                                                                      #3 std::__detail::_Node_const_iterator<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, false, true>::operator->() const /usr/include/c++/11/bits/hashtable_policy.h:398 (redis-server+0xcf784)                                                                                                                                                                                                         Previous write of size 8 at 0x5622c42eb2b0 by thread T2 (mutexes: read M25):                                                             #0 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_addr() /usr/include/c++/11/ext/aligned_buffer.h:102 (redis-server+0x876e9)                                                                                                    #1 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr() /usr/include/c++/11/ext/aligned_buffer.h:115 (redis-server+0x86950)                                                                                                     #2 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x8511c)                                                                                      #3 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_v() /usr/include/c++/11/bits/hashtable_policy.h:246 (redis-server+0xd3929)                                                                                                                                                                                                                                Location is global '__gcov0._ZN9__gnu_cxx16__aligned_bufferISt4pairIKN3rds3StrESt10shared_ptrINS2_8KeyValueEEEE7_M_addrEv' of size 16 at 0x5622c42eb2b0 (redis-server+0x0000001f22b0)                                                                                                                                                                                                                                Mutex M25 (0x7b2000000000) created at:                                                                                                   #0 pthread_rwlock_wrlock ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:1368 (libtsan.so.0+0x3f778)                     #1 __glibcxx_rwlock_wrlock /usr/include/c++/11/shared_mutex:80 (redis-server+0x8f07e)                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T2 (tid=15901, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/ext/aligned_buffer.h:102 in __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_addr()                                                                                       ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb2b8 by thread T1 (mutexes: read M25):                                                                       #0 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_addr() /usr/include/c++/11/ext/aligned_buffer.h:104 (redis-server+0x87708)                                                                                                    #1 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x8511c)                                                                                      #2 std::__detail::_Node_const_iterator<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, false, true>::operator->() const /usr/include/c++/11/bits/hashtable_policy.h:398 (redis-server+0xcf784)                                                                                                                                                                                                         Previous write of size 8 at 0x5622c42eb2b8 by thread T2 (mutexes: read M25):                                                             #0 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_addr() /usr/include/c++/11/ext/aligned_buffer.h:104 (redis-server+0x87722)                                                                                                    #1 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x8511c)                                                                                      #2 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_v() /usr/include/c++/11/bits/hashtable_policy.h:246 (redis-server+0xd3929)                                                                                                                                                                                                                                Location is global '__gcov0._ZN9__gnu_cxx16__aligned_bufferISt4pairIKN3rds3StrESt10shared_ptrINS2_8KeyValueEEEE7_M_addrEv' of size 16 at 0x5622c42eb2b0 (redis-server+0x0000001f22b8)                                                                                                                                                                                                                                Mutex M25 (0x7b2000000000) created at:                                                                                                   #0 pthread_rwlock_wrlock ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:1368 (libtsan.so.0+0x3f778)                     #1 __glibcxx_rwlock_wrlock /usr/include/c++/11/shared_mutex:80 (redis-server+0x8f07e)                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T2 (tid=15901, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/ext/aligned_buffer.h:104 in __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_addr()                                                                                       ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb488 by thread T1 (mutexes: read M25):                                                                       #0 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr() /usr/include/c++/11/ext/aligned_buffer.h:115 (redis-server+0x86963)                                                                                                     #1 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x8511c)                                                                                      #2 std::__detail::_Node_const_iterator<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, false, true>::operator->() const /usr/include/c++/11/bits/hashtable_policy.h:398 (redis-server+0xcf784)                                                                                                                                                                                                         Previous write of size 8 at 0x5622c42eb488 by thread T2 (mutexes: read M25):                                                             #0 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr() /usr/include/c++/11/ext/aligned_buffer.h:115 (redis-server+0x8697d)                                                                                                     #1 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x8511c)                                                                                      #2 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_v() /usr/include/c++/11/bits/hashtable_policy.h:246 (redis-server+0xd3929)                                                                                                                                                                                                                                Location is global '__gcov0._ZN9__gnu_cxx16__aligned_bufferISt4pairIKN3rds3StrESt10shared_ptrINS2_8KeyValueEEEE6_M_ptrEv' of size 24 at 0x5622c42eb480 (redis-server+0x0000001f2488)                                                                                                                                                                                                                                 Mutex M25 (0x7b2000000000) created at:                                                                                                   #0 pthread_rwlock_wrlock ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:1368 (libtsan.so.0+0x3f778)                     #1 __glibcxx_rwlock_wrlock /usr/include/c++/11/shared_mutex:80 (redis-server+0x8f07e)                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T2 (tid=15901, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/ext/aligned_buffer.h:115 in __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr()                                                                                        ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb490 by thread T1 (mutexes: read M25):                                                                       #0 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr() /usr/include/c++/11/ext/aligned_buffer.h:115 (redis-server+0x86998)                                                                                                     #1 std::__detail::_Node_const_iterator<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, false, true>::operator->() const /usr/include/c++/11/bits/hashtable_policy.h:398 (redis-server+0xcf784)                                                                                                                                                                                                         Previous write of size 8 at 0x5622c42eb490 by thread T2 (mutexes: read M25):                                                             #0 __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr() /usr/include/c++/11/ext/aligned_buffer.h:115 (redis-server+0x869b2)                                                                                                     #1 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_v() /usr/include/c++/11/bits/hashtable_policy.h:246 (redis-server+0xd3929)                                                                                                                                                                                                                                Location is global '__gcov0._ZN9__gnu_cxx16__aligned_bufferISt4pairIKN3rds3StrESt10shared_ptrINS2_8KeyValueEEEE6_M_ptrEv' of size 24 at 0x5622c42eb480 (redis-server+0x0000001f2490)                                                                                                                                                                                                                                 Mutex M25 (0x7b2000000000) created at:                                                                                                   #0 pthread_rwlock_wrlock ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:1368 (libtsan.so.0+0x3f778)                     #1 __glibcxx_rwlock_wrlock /usr/include/c++/11/shared_mutex:80 (redis-server+0x8f07e)                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T2 (tid=15901, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/ext/aligned_buffer.h:115 in __gnu_cxx::__aligned_buffer<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_ptr()                                                                                        ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb7c8 by thread T1 (mutexes: read M25):                                                                       #0 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x8512f)                                                                                      #1 std::__detail::_Node_const_iterator<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> >, false, true>::operator->() const /usr/include/c++/11/bits/hashtable_policy.h:398 (redis-server+0xcf784)                                                                                                                                                                                                         Previous write of size 8 at 0x5622c42eb7c8 by thread T2 (mutexes: read M25):                                                             #0 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x85149)                                                                                      #1 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_v() /usr/include/c++/11/bits/hashtable_policy.h:246 (redis-server+0xd3929)                                                                                                                                                                                                                                Location is global '__gcov0._ZNSt8__detail21_Hash_node_value_baseISt4pairIKN3rds3StrESt10shared_ptrINS2_8KeyValueEEEE9_M_valptrEv' of size 24 at 0x5622c42eb7c0 (redis-server+0x0000001f27c8)                                                                                                                                                                                                                        Mutex M25 (0x7b2000000000) created at:                                                                                                   #0 pthread_rwlock_wrlock ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:1368 (libtsan.so.0+0x3f778)                     #1 __glibcxx_rwlock_wrlock /usr/include/c++/11/shared_mutex:80 (redis-server+0x8f07e)                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T2 (tid=15901, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/hashtable_policy.h:238 in std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr()                                                                         ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42eb7d0 by thread T1 (mutexes: read M25):                                                                       #0 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x85164)                                                                                                                                                                                                                           Previous write of size 8 at 0x5622c42eb7d0 by thread T2 (mutexes: read M25):                                                             #0 std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr() /usr/include/c++/11/bits/hashtable_policy.h:238 (redis-server+0x8517e)                                                                                                                                                                                                                           Location is global '__gcov0._ZNSt8__detail21_Hash_node_value_baseISt4pairIKN3rds3StrESt10shared_ptrINS2_8KeyValueEEEE9_M_valptrEv' of size 24 at 0x5622c42eb7c0 (redis-server+0x0000001f27d0)                                                                                                                                                                                                                        Mutex M25 (0x7b2000000000) created at:                                                                                                   #0 pthread_rwlock_wrlock ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:1368 (libtsan.so.0+0x3f778)                     #1 __glibcxx_rwlock_wrlock /usr/include/c++/11/shared_mutex:80 (redis-server+0x8f07e)                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T2 (tid=15901, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/hashtable_policy.h:238 in std::__detail::_Hash_node_value_base<std::pair<rds::Str const, std::shared_ptr<rds::KeyValue> > >::_M_valptr()                                                                         ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec588 by thread T1:                                                                                           #0 std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count() /usr/include/c++/11/bits/shared_ptr_base.h:797 (redis-server+0x7ec27)                                                                                                                                       #1 std::__weak_ptr<rds::Object, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x12ff2d)                                                                                                                                                                                                                                                                 Previous write of size 8 at 0x5622c42ec588 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count() /usr/include/c++/11/bits/shared_ptr_base.h:797 (redis-server+0x7ec41)                                                                                                                                       #1 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c2f2)                                                                                                                         #2 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #3 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #4 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:244 (redis-server+0x9c1f2)                                                                                                                                                        Location is global '__gcov0._ZNSt12__weak_countILN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 32 at 0x5622c42ec580 (redis-server+0x0000001f3588)                                                                                                                                                                                                                                                                       Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:797 in std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count()                                                                                                                          ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec040 by thread T1:                                                                                           #0 std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_weak_release() /usr/include/c++/11/bits/shared_ptr_base.h:194 (redis-server+0x81569)                                                                                                                                 #1 std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count() /usr/include/c++/11/bits/shared_ptr_base.h:798 (redis-server+0x7ec63)                                                                                                                                       #2 std::__weak_ptr<rds::Object, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x12ff2d)                                                                                                                                                                                                                                                                 Previous write of size 8 at 0x5622c42ec040 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_weak_release() /usr/include/c++/11/bits/shared_ptr_base.h:194 (redis-server+0x81583)                                                                                                                                 #1 std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count() /usr/include/c++/11/bits/shared_ptr_base.h:798 (redis-server+0x7ec63)                                                                                                                                       #2 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c2f2)                                                                                                                         #3 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #4 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #5 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:244 (redis-server+0x9c1f2)                                                                                                                                                        Location is global '__gcov0._ZNSt16_Sp_counted_baseILN9__gnu_cxx12_Lock_policyE2EE15_M_weak_releaseEv' of size 40 at 0x5622c42ec040 (redis-server+0x0000001f3040)                                                                                                                                                                                                                                                    Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:194 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_weak_release()                                                                                                                    ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec060 by thread T1:                                                                                           #0 std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_weak_release() /usr/include/c++/11/bits/shared_ptr_base.h:207 (redis-server+0x81714)                                                                                                                                 #1 std::__weak_ptr<rds::Object, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x12ff2d)                                                                                                                                                                                                                                                                 Previous write of size 8 at 0x5622c42ec060 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_weak_release() /usr/include/c++/11/bits/shared_ptr_base.h:207 (redis-server+0x8172e)                                                                                                                                 #1 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c2f2)                                                                                                                         #2 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #3 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #4 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:244 (redis-server+0x9c1f2)                                                                                                                                                        Location is global '__gcov0._ZNSt16_Sp_counted_baseILN9__gnu_cxx12_Lock_policyE2EE15_M_weak_releaseEv' of size 40 at 0x5622c42ec040 (redis-server+0x0000001f3060)                                                                                                                                                                                                                                                    Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:207 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_weak_release()                                                                                                                    ==================                                                                                                                     ==================                                                                                                                     WARNING: ThreadSanitizer: data race (pid=15898)                                                                                          Read of size 8 at 0x5622c42ec590 by thread T1:                                                                                           #0 std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count() /usr/include/c++/11/bits/shared_ptr_base.h:798 (redis-server+0x7ec72)                                                                                                                                       #1 std::__weak_ptr<rds::Object, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x12ff2d)                                                                                                                                                                                                                                                                 Previous write of size 8 at 0x5622c42ec590 by thread T3 (mutexes: write M774196906575846656):                                            #0 std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count() /usr/include/c++/11/bits/shared_ptr_base.h:798 (redis-server+0x7ec8c)                                                                                                                                       #1 std::__weak_ptr<rds::ClientInfo, (__gnu_cxx::_Lock_policy)2>::~__weak_ptr() /usr/include/c++/11/bits/shared_ptr_base.h:1610 (redis-server+0x7c2f2)                                                                                                                         #2 std::weak_ptr<rds::ClientInfo>::~weak_ptr() /usr/include/c++/11/bits/shared_ptr.h:686 (redis-server+0x7c3be)                        #3 std::pair<std::weak_ptr<rds::ClientInfo>, int>::~pair() /usr/include/c++/11/bits/stl_pair.h:211 (redis-server+0x87430)              #4 rds::Handler::HandleClient(rds::Handler*) /home/jean/mypieces/rds/src/server/server.cc:244 (redis-server+0x9c1f2)                                                                                                                                                        Location is global '__gcov0._ZNSt12__weak_countILN9__gnu_cxx12_Lock_policyE2EED2Ev' of size 32 at 0x5622c42ec580 (redis-server+0x0000001f3590)                                                                                                                                                                                                                                                                       Mutex M774196906575846656 is already destroyed.                                                                                                                                                                                                                               Thread T1 (tid=15900, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                     Thread T3 (tid=15902, running) created by main thread at:                                                                                #0 pthread_create ../../../../src/libsanitizer/tsan/tsan_interceptors_posix.cpp:969 (libtsan.so.0+0x605b8)                             #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc388)                                                                                                                  #2 __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58 (libc.so.6+0x29d8f)                                                                                                                                                                                   SUMMARY: ThreadSanitizer: data race /usr/include/c++/11/bits/shared_ptr_base.h:798 in std::__weak_count<(__gnu_cxx::_Lock_policy)2>::~__weak_count()                                                                                                                          ==================                          